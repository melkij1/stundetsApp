{"remainingRequest":"/Users/melkij/Documents/Project/Students/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/melkij/Documents/Project/Students/src/components/TableStudent.vue?vue&type=style&index=0&id=5e8b9103&scoped=true&lang=css&","dependencies":[{"path":"/Users/melkij/Documents/Project/Students/src/components/TableStudent.vue","mtime":1564735380000},{"path":"/Users/melkij/Documents/Project/Students/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/melkij/Documents/Project/Students/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/melkij/Documents/Project/Students/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/melkij/Documents/Project/Students/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/melkij/Documents/Project/Students/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.table-student{\n  max-width: 800px;\n  width: 100%;\n  margin: 0 auto;\n  padding-top: 50px;\n  color: #1e2459;\n}\n.table-student tbody tr{\n  cursor: pointer;\n}\n.table-student tbody .active{\n  background-color: #1e2459;\n  color: #ffffff;\n}\n.table-student tbody tr:nth-child(even){\n  background-color: #f2f2f2;\n}\n\n.table-student tbody .active:nth-child(even){\n  background-color: #1e2459;\n}\n\n.btn-delet{\n  margin-top: 10px;\n  float: right;\n  background: red;\n  color: #ffffff;\n  border: transparent;\n  font-size: 15px;\n}\n.btn-edit{\n  font-size: 15px;\n  border: transparent;\n  background-color: green;\n  color: #ffffff;\n}\n.table-student tbody tr:hover{\n  background-color: #f5ec90;\n}\n.search-block{\n  margin-top: 30px;\n}\n.sort-icon {\n  transform: rotate(90deg);\n}\n.sort-icon.active {\n  color: red;\n}\n.sort-icon.desc {\n  transform: rotate(270deg);\n}\n",{"version":3,"sources":["TableStudent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TableStudent.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"search-block\">\n      Поиск <input type=\"text\" class=\"search\" v-model=\"search\" placeholder=\"Введите фамилию\"  autofocus />\n    </div>\n    <table class=\"table-student\">\n      <thead>\n        <tr>\n          <th\n            v-for=\"(column, i) in columns\"\n            :key=\"i\"\n          >\n            {{ column.name }}\n            <button\n              v-if=\"column.sorted\"\n              @click=\"sortHandler(column)\"\n              :class=\"[\n              'sort-icon',\n              { active: sortColumn === column},\n              { desc: sortColumn === column && sortOrder === 'desc' },\n            ]\"\n            >\n              >\n            </button>\n            <SelectFilter\n              v-if=\"column.filtered\"\n              :values=\"filterValues(column.prop)\"\n              @change=\"filterHandler(column.prop, $event)\"\n            />\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(list, index) in currentLists\" :key=\"index\" :class=\"{active: list.isChecked}\"\n        @click=\"list.isChecked = !list.isChecked\" :id=\"list.id\">\n          <th><input type=\"checkbox\" class=\"list-item-checkbox\" v-model=\"list.isChecked\"/></th>\n          <th  >\n            {{list.name}}\n          </th>\n          <th >\n              {{list.family}}\n          </th>\n          <th >{{list.data}}</th>\n          <th >{{list.group}}</th>\n          <th>\n            <button  class=\"btn-edit\"  @click=\"showeditModal(index)\">Изменить</button>\n          </th>\n        </tr>\n      </tbody>\n      <button @click=\"deleteItems()\" class=\"btn-delet\">Удалить</button>\n    </table>\n  </div>\n</template>\n\n<script>\nimport SelectFilter from '../components/Filter';\n\nfunction dynamicSort(property) {\n    var sortOrder = 1;\n    if(property[0] === \"-\") {\n        sortOrder = -1;\n        property = property.substr(1);\n    }\n    return function (a,b) {\n        var result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0;\n        return result * sortOrder;\n    }\n}\n\nexport default {\n  props: {\n    lists: {\n      required: true,\n      type: Array\n    },\n  },\n  components: {\n    SelectFilter,\n  },\n  created(){\n    document.addEventListener('keydown', ({code}) => {\n    if (code !== 'Delete' && code !== 'Backspace') {\n      return\n    }\n      this.deleteItems()\n    });\n  },\n  data(){\n    return {\n      columns: [\n        { name: '', prop: '' },\n        { name: 'Имя', prop: 'name' },\n        { name: 'Фамилия', prop: 'family', sorted: true },\n        { name: 'Возраст', prop: 'data', sorted: true, filtered: true },\n        { name: 'Группа', prop: 'group', sorted: true, filtered: true },\n      ],\n      search: '',\n      sortColumn: {},\n      sortOrder: 'asc',\n      filters: [],\n    }\n  },\n  methods: {\n    deleteItems: function () {\n      this.$emit('delete-item', this.getSelectedIdsFromList());\n    },\n    getSelectedIdsFromList() {\n        return this.lists\n            .filter(item => item.isChecked === true)\n            .map(item => item.id)\n    },\n    showeditModal: function (index) {\n      this.$emit('edit_student', this.currentLists[index], index);\n    },\n    sortHandler(column) {\n      if (this.sortColumn.name === column.name) {\n        this.sortOrder = (this.sortOrder === 'asc')\n          ? 'desc' : 'asc';\n      } else {\n        this.sortOrder = 'asc';\n        this.sortColumn = column;\n      }\n    },\n    filterValues(field) {\n      return [...new Set(this.lists.map(item => item[field]))];\n    },\n    filterHandler(prop, event) {\n      const value = event.target.value;\n      const index = this.filters.findIndex(item => item.prop === prop);\n      if (index === -1 && value) {\n        this.filters.push({ prop, value });\n      } else {\n        this.filters.splice(index, 1);\n        if (value) {\n          this.filters.push({ prop, value });\n        }\n      }\n    }\n  },\n  computed: {\n    currentLists() {\n      let result = [];\n      // поиск по фамилии\n      result = this.lists.filter(list => {\n        return list.family.toLowerCase().includes(this.search.toLowerCase())\n      });\n      // сортировка\n      if (this.sortColumn.name) {\n        const order = (this.sortOrder === 'asc') ? '' : '-';\n        result = result.sort(dynamicSort(`${order}${this.sortColumn.prop}`));\n      }\n      // фильтрация\n      if (this.filters.length) {\n        result = result.filter(item => {\n          for (let filter of this.filters) {\n            if (item[filter.prop] !== filter.value) {\n              return false;\n            }\n          }\n          return true;\n        });\n      }\n      return result;\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .table-student{\n    max-width: 800px;\n    width: 100%;\n    margin: 0 auto;\n    padding-top: 50px;\n    color: #1e2459;\n  }\n  .table-student tbody tr{\n    cursor: pointer;\n  }\n  .table-student tbody .active{\n    background-color: #1e2459;\n    color: #ffffff;\n  }\n  .table-student tbody tr:nth-child(even){\n    background-color: #f2f2f2;\n  }\n\n  .table-student tbody .active:nth-child(even){\n    background-color: #1e2459;\n  }\n\n  .btn-delet{\n    margin-top: 10px;\n    float: right;\n    background: red;\n    color: #ffffff;\n    border: transparent;\n    font-size: 15px;\n  }\n  .btn-edit{\n    font-size: 15px;\n    border: transparent;\n    background-color: green;\n    color: #ffffff;\n  }\n  .table-student tbody tr:hover{\n    background-color: #f5ec90;\n  }\n  .search-block{\n    margin-top: 30px;\n  }\n  .sort-icon {\n    transform: rotate(90deg);\n  }\n  .sort-icon.active {\n    color: red;\n  }\n  .sort-icon.desc {\n    transform: rotate(270deg);\n  }\n</style>\n"]}]}